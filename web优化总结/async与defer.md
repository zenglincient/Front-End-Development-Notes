## script标签的defer 和async 和没有写，区别是什么

### 1. 没有 `defer` 或 `async`（普通脚本）

- **加载行为**：浏览器会立即停止解析 HTML 文档，开始下载并执行脚本。
- **执行时机**：脚本会在下载完成后立即执行，这会阻塞 HTML 的解析直到脚本执行完成。
- **用途**：适用于那些需要立即执行的脚本，且这些脚本可能会影响页面后续内容的展示。

### 2. `defer`

- **加载行为**：脚本会在 HTML 解析过程中异步下载，但延迟执行直到 HTML 文档解析完成。
- **执行时机**：所有 `defer` 脚本保持它们在 HTML 中出现的顺序，并在 DOMContentLoaded 事件触发前执行。
- **用途**：适用于那些不需要立刻执行，但需要在整个页面解析完成后才执行的脚本，特别是那些依赖于或修改 DOM 的脚本。

### 3. `async`

- **加载行为**：脚本同样会在 HTML 解析过程中异步下载，但它会在下载完成后尽快执行。
- **执行时机**：脚本执行的具体时间取决于下载速度，因此执行顺序无法保证。
- **用途**：适用于那些与页面其余部分相互独立的脚本，如计数器或广告，这些脚本不需要等待 DOMContentLoaded 事件。

### 执行和加载顺序比较

- **无属性**：脚本会立即下载并阻塞 HTML 的解析和执行，直到脚本执行完毕。
- **`defer`**：脚本在 HTML 解析期间下载，但在 HTML 完全解析完成之后、`DOMContentLoaded` 事件之前按照它们在文档中出现的顺序执行。
- **`async`**：脚本在 HTML 解析期间下载，下载完成后立即执行，执行时间不定，也不会等待其他脚本或 HTML 解析完成。

### 实际应用的选择

- 当脚本中包含了 DOM 操作，且需要保证页面结构已完全加载时，应选择 `defer`。
- 当脚本完全独立于页面内容，且脚本加载顺序和页面加载顺序不敏感时，可以选择 `async`。
- 当脚本需要立即执行，特别是在它控制着页面后续加载内容的情况下，应直接插入脚本，不使用 `defer` 或 `async`。

通过这种方式，开发者可以根据具体需求和脚本的性质选择最适合的加载方式，以优化页面加载性能和用户体验。

## 关于  async 我有一个问题，“ 它会在下载完成后尽快执行 ”如果它下载后html还没加载完毕，他会执行并且阻塞html加载吗？
### 会的！！
当 async 脚本下载完成并准备执行时，如果 HTML 解析尚未完成，浏览器会暂停 HTML 的解析，执行脚本，然后再继续 HTML 的解析。这意味着：

执行阶段的阻塞：虽然 async 脚本的下载过程不会阻塞 HTML 解析，但它的执行会。如果脚本执行时间较长，它会在执行期间阻塞页面的解析。
不影响下载：脚本的下载与页面的其他元素的下载可以并行进行，不会相互阻塞。

